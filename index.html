<!DOCTYPE html>
<html>
<head>
  <title>Roman Time Clock</title>
  <style>
    body {
      background: #800000;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 30px 40px;
      box-shadow: 0 0 12px #40000080;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    input, button {
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      border: none;
      font-size: 1.1em;
    }
    button {
      background: #b22222;
      color: white;
      cursor: pointer;
      width: 200px;
      margin-bottom: 10px;
    }
    h2 {
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Roman Time Clock</h2>
    <input id="name" type="text" placeholder="Employee Name" required />
    <div>
      <button onclick="clock('in')">Clock In</button>
      <button onclick="clock('out')">Clock Out</button>
    </div>
    <p id="status"></p>
  </div>
  <script>
    function clock(type) {
      const name = document.getElementById('name').value.trim();
      if (!name) {
        alert('Please enter your name.');
        return;
      }
      document.getElementById('status').innerText = 'Getting location...';
      navigator.geolocation.getCurrentPosition(pos => {
        const gps = pos.coords.latitude + ',' + pos.coords.longitude;
        const now = new Date().toLocaleTimeString('en-US', { hour12: false });
        fetch('https://script.google.com/a/macros/romanmechanical.com/s/AKfycbxVWDYg4AfgXp4pVFnGZNxNHih863FpUoCa-MqEViEWcyqHPrk0fUhu9bAJT_lXXfMv/exec', {
          method: 'POST',
          body: JSON.stringify({name, time: now, gps, type}),
          headers: {'Content-Type': 'application/json'}
        })
        .then(response => response.text())
        .then(res => {
          if (res.indexOf("All clock-ins used") !== -1) {
            document.getElementById('status').innerText = "All clock-ins used for today!";
          } else if (res.indexOf("All clock-outs used") !== -1) {
            document.getElementById('status').innerText = "All clock-outs used for today!";
          } else if (res.indexOf("OK") !== -1) {
            document.getElementById('status').innerText = 'Clocked ' + (type === 'in' ? 'IN' : 'OUT') + ' at ' + now;
          } else {
            document.getElementById('status').innerText = 'Error submitting clock.';
          }
        })
        .catch(() => {
          document.getElementById('status').innerText = 'Error submitting clock.';
        });
      }, () => {
        document.getElementById('status').innerText = 'Location required!';
      });
    }
  </script>
</body>
</html>
